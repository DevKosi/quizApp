<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Physics Quiz | Department of Industrial Physics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;600;700&family=Open+Sans:wght@300;400&display=swap"
        rel="stylesheet">
    <style>
        /* Disable text selection everywhere */
        body,
        * {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        :root {
            --primary-dark: #0a192f;
            --primary-light: #172a45;
            --accent-color: #64ffda;
            --text-primary: #ccd6f6;
            --text-secondary: #8892b0;
            --star-color: rgba(255, 255, 255, 0.8);
            --constellation-line: rgba(100, 255, 218, 0.3);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto Slab', serif;
            overflow: hidden;
            background-color: var(--primary-dark);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .splash-container {
            text-align: center;
            position: relative;
            z-index: 2;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
        }

        .title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 700;
            margin: 0;
            line-height: 1.2;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 0.5s forwards;
        }

        .subtitle {
            font-family: 'Open Sans', sans-serif;
            font-size: clamp(1rem, 2.5vw, 1.5rem);
            font-weight: 300;
            margin: 1rem 0 2rem;
            color: var(--text-secondary);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 1s forwards;
        }

        .countdown-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            opacity: 0;
            animation: fadeIn 0.5s 1.5s forwards;
        }

        .countdown-box {
            background: rgba(23, 42, 69, 0.7);
            border-radius: 8px;
            padding: 1rem;
            min-width: 80px;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .countdown-box:hover {
            transform: translateY(-5px);
        }

        .countdown-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-color);
            line-height: 1;
        }

        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.5rem;
            color: var(--text-secondary);
        }

        .loading-container {
            width: 100%;
            max-width: 300px;
            margin: 3rem auto;
            opacity: 0;
            animation: fadeIn 0.5s 1.5s forwards;
        }

        .loading-bar {
            width: 100%;
            height: 2px;
            background: rgba(100, 255, 218, 0.2);
            border-radius: 1px;
            overflow: hidden;
            position: relative;
        }

        .loading-progress {
            position: absolute;
            height: 100%;
            width: 0;
            background: var(--accent-color);
            border-radius: 1px;
            animation: load 8s 1.5s linear forwards;
        }

        .constellation {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: var(--star-color);
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
            transition: transform 0.3s ease, opacity 0.3s ease;
            will-change: transform, opacity;
        }

        .constellation-line {
            position: absolute;
            height: 1px;
            background: var(--constellation-line);
            transform-origin: 0 0;
            transition: opacity 0.5s ease;
            will-change: transform, opacity;
        }

        .physics-symbol {
            position: absolute;
            color: rgba(100, 255, 218, 0.3);
            font-size: 24px;
            font-weight: bold;
            opacity: 0;
            animation: fadeInOut 8s infinite;
            will-change: transform, opacity;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes load {
            to {
                width: 100%;
            }
        }

        @keyframes twinkle {
            0% {
                opacity: 0.3;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes float {
            to {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }

        @keyframes fadeInOut {

            0%,
            100% {
                opacity: 0;
                transform: scale(0.5);
            }

            50% {
                opacity: 0.5;
                transform: scale(1);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .countdown-box {
                min-width: 60px;
                padding: 0.5rem;
            }

            .countdown-value {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="constellation" id="constellationCanvas"></div>

    <div class="splash-container">
        <h1 class="title">Physics Quiz</h1>
        <h2 class="subtitle">Department of Industrial Physics</h2>
        <h2 class="subtitle">The quiz starts in:</h2>

        <div class="countdown-container" id="countdown">
            <div class="countdown-box">
                <div class="countdown-value" id="hours">00</div>
                <div class="countdown-label">Hours</div>
            </div>
            <div class="countdown-box">
                <div class="countdown-value" id="minutes">00</div>
                <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-box">
                <div class="countdown-value" id="seconds">00</div>
                <div class="countdown-label">Seconds</div>
            </div>
        </div>

        <div class="loading-container">
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <script>
        // Constellation animation with dynamic connections
        class Constellation {
            constructor(container) {
                this.container = container;
                this.width = window.innerWidth;
                this.height = window.innerHeight;
                this.stars = [];
                this.lines = [];
                this.physicsSymbols = ['α', 'β', 'γ', 'δ', 'ε', 'θ', 'λ', 'μ', 'π', 'σ', 'τ', 'ω', 'Δ', 'Σ', 'Ψ', 'Ω', '∞', '∂', '∫', '∮', '∇'];
                this.connections = [];

                this.initStars();
                this.initPhysicsSymbols();
                this.animateConnections();

                window.addEventListener('resize', this.handleResize.bind(this));
            }

            handleResize() {
                this.width = window.innerWidth;
                this.height = window.innerHeight;

                // Reposition stars
                this.stars.forEach(star => {
                    star.element.style.left = `${star.x / this.width * 100}%`;
                    star.element.style.top = `${star.y / this.height * 100}%`;
                });

                // Update existing lines
                this.updateLines();
            }

            initStars() {
                const starCount = Math.floor(this.width * this.height / 1000);

                for (let i = 0; i < starCount; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');

                    // Random size between 1px and 3px
                    const size = Math.random() * 2 + 1;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;

                    // Random position
                    const x = Math.random() * this.width;
                    const y = Math.random() * this.height;
                    star.style.left = `${x / this.width * 100}%`;
                    star.style.top = `${y / this.height * 100}%`;

                    // Random animation delay
                    star.style.animationDelay = `${Math.random() * 3}s`;

                    this.container.appendChild(star);

                    // Store star data for connections
                    this.stars.push({
                        element: star,
                        x: x,
                        y: y,
                        size: size,
                        connections: 0
                    });
                }
            }

            initPhysicsSymbols() {
                for (let i = 0; i < 15; i++) {
                    const symbol = document.createElement('div');
                    symbol.classList.add('physics-symbol');
                    symbol.textContent = this.physicsSymbols[Math.floor(Math.random() * this.physicsSymbols.length)];

                    symbol.style.left = `${Math.random() * 90 + 5}vw`;
                    symbol.style.top = `${Math.random() * 90 + 5}vh`;
                    symbol.style.animationDelay = `${Math.random() * 8}s`;

                    this.container.appendChild(symbol);
                }
            }

            animateConnections() {
                // Clear existing lines
                this.lines.forEach(line => line.element.remove());
                this.lines = [];
                this.connections = [];

                // Create new connections
                const visibleStars = this.stars.filter(() => Math.random() > 0.7);

                for (let i = 0; i < visibleStars.length; i++) {
                    // Limit connections per star
                    if (visibleStars[i].connections >= 3) continue;

                    // Find nearest stars to connect to
                    const nearestStars = this.findNearestStars(visibleStars[i], visibleStars, 3);

                    nearestStars.forEach(neighbor => {
                        // Don't connect if already connected or would exceed connection limit
                        if (neighbor.connections >= 3 ||
                            this.connections.some(c =>
                                (c.from === visibleStars[i] && c.to === neighbor) ||
                                (c.from === neighbor && c.to === visibleStars[i]))) {
                            return;
                        }

                        this.createConnection(visibleStars[i], neighbor);
                        visibleStars[i].connections++;
                        neighbor.connections++;
                    });
                }

                // Schedule next connection animation
                setTimeout(() => this.animateConnections(), 3000);
            }

            findNearestStars(star, stars, count) {
                // Sort stars by distance
                const sorted = [...stars]
                    .filter(s => s !== star)
                    .sort((a, b) => {
                        const distA = Math.sqrt(Math.pow(a.x - star.x, 2) + Math.pow(a.y - star.y, 2));
                        const distB = Math.sqrt(Math.pow(b.x - star.x, 2) + Math.pow(b.y - star.y, 2));
                        return distA - distB;
                    });

                // Return closest stars (limit by count)
                return sorted.slice(0, count);
            }

            createConnection(star1, star2) {
                const line = document.createElement('div');
                line.classList.add('constellation-line');

                const x1 = star1.x;
                const y1 = star1.y;
                const x2 = star2.x;
                const y2 = star2.y;

                const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;

                line.style.width = `${length}px`;
                line.style.left = `${x1}px`;
                line.style.top = `${y1}px`;
                line.style.transform = `rotate(${angle}deg)`;
                line.style.opacity = '0';

                this.container.appendChild(line);

                // Store connection
                this.connections.push({
                    from: star1,
                    to: star2,
                    element: line
                });
                this.lines.push(line);

                // Animate line appearance
                setTimeout(() => {
                    line.style.opacity = Math.random() * 0.5 + 0.2;
                    line.style.transition = 'opacity 1s ease';
                }, 100);
            }

            updateLines() {
                this.connections.forEach(connection => {
                    const { from, to, element } = connection;
                    const x1 = from.x;
                    const y1 = from.y;
                    const x2 = to.x;
                    const y2 = to.y;

                    const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                    const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;

                    element.style.width = `${length}px`;
                    element.style.left = `${x1}px`;
                    element.style.top = `${y1}px`;
                    element.style.transform = `rotate(${angle}deg)`;
                });
            }
        }

        // Countdown to quiz start (9am today or tomorrow if already past 9am)
    function updateCountdown() {
        const now = new Date();
        const today9AM = new Date();
        
        // Set to today's 9AM
        today9AM.setHours(9, 0, 0, 0);
        
        // Determine target time (today's 9AM if not passed, otherwise tomorrow's)
        const quizTime = now < today9AM ? today9AM : new Date(today9AM.getTime() + 86400000);
        
        const diff = quizTime - now;

        if (diff <= 0) {
            // Quiz time has arrived, redirect to login
            window.location.href = 'login.html';
            return;
        }

        // Calculate hours, minutes, seconds
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        // Update display
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

        // Update loading bar progress (for visual effect)
        const totalHoursUntilQuiz = (quizTime - today9AM) / (1000 * 60 * 60) + 24;
        const progressPercent = ((totalHoursUntilQuiz * 60 - (hours * 60 + minutes)) / (totalHoursUntilQuiz * 60)) * 100;
        document.querySelector('.loading-progress').style.width = `${progressPercent}%`;
    }

    // Initialize
    window.onload = function() {
        const constellation = new Constellation(document.getElementById('constellationCanvas'));
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Add interactive star highlighting
        document.addEventListener('mousemove', (e) => {
            constellation.stars.forEach(star => {
                const starX = star.x;
                const starY = star.y;
                const distance = Math.sqrt(Math.pow(e.clientX - starX, 2) + Math.pow(e.clientY - starY, 2));
                
                if (distance < 100) {
                    star.element.style.transform = `scale(${1 + (100 - distance) / 200})`;
                    star.element.style.opacity = 1;
                } else {
                    star.element.style.transform = 'scale(1)';
                    star.element.style.opacity = '';
                }
            });
        });
    };
    </script>
</body>

</html>
